<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DS 1 vs N</title>
<link rel="icon" type="image/x-icon" href="assets/ug%20ds%20logo%20favicon.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Georgian:wght@100..900&family=Saira:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">


<style>

:root {
  --bg: #0C1A22;
  --accent: #ED3737;
  --text: #fff;
  --photo-size: 90vmin;
  --blur: 20px;
  --transition: 1s cubic-bezier(.22,1,.36,1);
}
*{box-sizing:border-box;}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);overflow:hidden;}
.slides{position:relative;width:100%;height:100%;  font-family: "Noto Sans Georgian", sans-serif;}

/* === Base Slide Animation === */
.slide{
  position:absolute;inset:0;display:grid;place-items:center;
  opacity:0;transform:translateY(60px);filter:blur(var(--blur));overflow: hidden;
  transition:opacity var(--transition),transform var(--transition),filter var(--transition);
}
.slide.active{opacity:1;transform:translateY(0);filter:none;overflow: hidden;}
.slide.exit{opacity:0;transform:translateY(-60px);filter:blur(var(--blur));overflow: hidden;}

/* === Slide 1 (center photo) === */
#slide-1 img{
  width:var(--photo-size);height:var(--photo-size);
  object-fit:cover;border-radius:0;
  opacity:0;transform:scale(0.8);filter:blur(10px);
  transition:opacity 1.2s ease,transform 2s ease,filter 1.2s ease;
}
#slide-1.active img{
  opacity:1;transform:scale(1);filter:blur(0);
}


#slide-2 {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: var(--bg);
}

/* === Slide 2 (fullscreen image) === */
#slide-2 img {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  object-position: center;
  background-color: var(--bg);
}

/* === Slide 3 (3-2-1 countdown) === */
#slide-3{
  background:var(--bg);
  color:var(--text);
  transition: background-color .8s,color .8s;
  display:grid;place-items:center;
}
#slide-3.switch{background:var(--accent);color:var(--bg);}
.slide-inner{
  opacity:0;transform:translateY(60px);filter:blur(var(--blur));
  transition:opacity var(--transition),transform var(--transition),filter var(--transition);
}
#slide-3.active .slide-inner{opacity:1;transform:translateY(0);filter:none;}
.title{
  font-size:clamp(100px,8vmin,120px);
  font-weight:800;letter-spacing:.03em;
  opacity:1;transition:opacity .5s ease;
}
.title.hidden{opacity:0;}
.countdown{position:absolute;inset:0;display:grid;place-items:center;}
.circle {
  width: 400px;
  height: 400px;
  border: 20px solid var(--text);
  border-radius: 50%;
  display: grid;
  place-items: center;
  font-size: 200px;
  font-weight: 600;
  color: var(--text);
  animation: circleAnim 3s linear forwards;
}
.circle.inverted{border-color:var(--bg);color:var(--bg);}
@keyframes circleAnim{0%{transform:scale(1);}100%{transform:scale(1.2);}}

/* === Slide 4 (Timer) === */
.timer {
  font-family: "Saira", sans-serif;
  font-weight: 700;font-variant-numeric: tabular-nums;
  font-size: clamp(48px, 40vmin, 440px);
  letter-spacing: .03em;position:relative;
  display:flex;gap:0.02em;color:var(--text);
  transition:color .3s ease, filter .6s ease, opacity .6s ease;
}
.timer.paused{color:var(--accent);}
.timer.resetting{
  filter:blur(60px);
  opacity:0;
  transition:filter 1s ease, opacity 1s ease;
}
.timer .digit{position:relative;display:inline-block;width:1ch;text-align:center;}
.digit .prev,.digit .next{
  position:absolute;inset:0;display:flex;justify-content:center;align-items:center;
}
.digit .prev{opacity:1;filter:none;transform:translateY(0);}
.digit .next{opacity:0;filter:blur(20px);transform:translateY(40%);}
.digit.anim .prev{animation:fadeOut .4s ease forwards;}
.digit.anim .next{animation:fadeIn .4s ease forwards;}
@keyframes fadeOut{0%{opacity:1;transform:translateY(0);}100%{opacity:0;transform:translateY(-40%);filter:blur(10px);} }
@keyframes fadeIn{0%{opacity:0;transform:translateY(40%);filter:blur(10px);}100%{opacity:1;transform:translateY(0);filter:none;}}

/* === Slide 5 (QR) === */
.qr-wrap {
  display: grid;
  place-items: center;
  gap: 10px;
  text-align: center;
  height: 100%;
}
.qr-box {
  width: var(--photo-size);
  height: var(--photo-size);
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 0;
  overflow: hidden;
}
.qr-svg {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.qr-text{font-size:4rem;font-weight:800;color:#fff;letter-spacing:2px;margin-top:0;}

/* === Placeholder (Slide 6) === */
.placeholder{font-size:clamp(32px,10vmin,120px);font-weight:900;opacity:.8;}

.timer-overlay {
  position: absolute;
  inset: 0;
  backdrop-filter: blur(20px);
  background: rgba(12, 26, 34, 0.3);
  display: grid;
  place-items: center;
  z-index: 10;
  transition: opacity 0.5s ease;
}

.controls-overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(12, 26, 34, 0.75);
  backdrop-filter: blur(20px);
  color: var(--text);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 99;
}
.controls-overlay.visible {opacity: 1;}
.controls-box {
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid var(--accent);
  border-radius: 12px;
  padding: 2rem 3rem;
  text-align: left;
  font-size: 1.5rem;
  line-height: 1.8;
}
.controls-box h2 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 2rem;
  color: var(--accent);
}
</style>
</head>

<body>
<div class="slides">
  
  <!-- ðŸŸ© Added empty Slide 0 -->
  <section class="slide active" id="slide-0">
  </section>

  <section class="slide" id="slide-1">
    <img src="https://github.com/David3dArt/UGSTUFF/raw/refs/heads/main/assetsimg/ug%20ds%20logo%20svg%20web%202.svg" alt="Centered photo">
  </section>

  <section class="slide" id="slide-2">
    <img src="https://github.com/David3dArt/ug-ds-assets-0101555/raw/refs/heads/main/ug%20ds%20rules.svg" alt="Full screen fit image">
  </section>

  <section class="slide" id="slide-3">
    <div class="slide-inner">
      <div class="title" id="slide3Title" style="font-size: 250px; font-weight: 700;">START</div>
    </div>
  </section>

  <section class="slide" id="slide-4">
    <div class="timer" id="timer"></div>
  </section>

  <section class="slide" id="slide-5">
    <div class="qr-wrap">
      <a href="https://app.sli.do/event/1xCQRhnPoK9bEytcj23We8/live/polls" target="_blank">
        <div class="qr-box">
          <object class="qr-svg" type="image/svg+xml"
            data="https://api.qrserver.com/v1/create-qr-code/?data=https%3A%2F%2Fapp.sli.do%2Fevent%2F1xCQRhnPoK9bEytcj23We8%2Flive%2Fpolls&format=svg&color=ffffff&bgcolor=0C1A22&size=500x500">
          </object>
        </div>
      </a>
      <div class="qr-text">VOTE</div>
    </div>
  </section>

  <section class="slide" id="slide-6">
    <div class="placeholder"></div>
  </section>
</div>

<!-- preload audio elements -->
<audio id="countBeep" src="sfx/tick%203s%20timer%203.mp3" preload="auto"></audio>
<audio id="countEnd"  src="sfx/tick%203s%20timer%202.mp3" preload="auto"></audio>
<audio id="timerTick" src="sfx/timer%20tick.mp3" preload="auto"></audio>

<script>
(function(){
  const slides = document.querySelectorAll(".slide");
  let activeIndex = 0, busy = false;
  const COUNTDOWN_SPEED = 900;
  const ZERO_HOLD_TIME = 3000;

  /* === ðŸ”§ easy timer setup === */
  const TIMER1_MINUTES = 20; // change this to adjust first timer
  const TIMER2_MINUTES = 10; // change this to adjust second timer

  // === preload sounds ===
  const countBeep = document.getElementById("countBeep");
  const countEnd  = document.getElementById("countEnd");
  const timerTick = document.getElementById("timerTick");
  [countBeep, countEnd, timerTick].forEach(a => a.load());
  const playSound = a => { a.currentTime = 0; a.play().catch(()=>{}); };

  // === slide switching ===
  function showSlide(i) {
    if (busy || i === activeIndex || i < 0 || i >= slides.length) return;
    busy = true;
    const from = slides[activeIndex];
    from.classList.remove("active"); from.classList.add("exit");
    if (activeIndex === 3) resetSlide3();
    const next = slides[i];
    next.classList.add("active");
    setTimeout(() => { from.classList.remove("exit"); activeIndex = i; busy = false; }, 800);
  }

  // === slide 3 countdown ===
  let countdownRunning = false;
  function startCountdown(slide) {
    if (activeIndex !== 3 || countdownRunning) return;
    countdownRunning = true;
    const title = document.getElementById("slide3Title");
    title.classList.add("hidden");
    const c = document.createElement("div"); c.className = "countdown";
    const circle = document.createElement("div"); circle.className = "circle";
    let count = 3; circle.textContent = count; c.appendChild(circle); slide.appendChild(c);

    c.style.opacity = "0"; c.style.filter = "blur(30px)";
    requestAnimationFrame(()=>{ c.style.opacity = "1"; c.style.filter = "blur(0)"; });

    setTimeout(()=>{
      playSound(countBeep);
      const interval = setInterval(()=>{
        count--;
        if(count>0){ circle.textContent = count; playSound(countBeep); }
        else if(count===0){
          circle.textContent = count;
          slide.classList.toggle("switch");
          circle.classList.add("inverted"); playSound(countEnd);
        } else { clearInterval(interval); countdownRunning = false; }
      }, COUNTDOWN_SPEED);
    }, 1000);
  }

  function resetSlide3(){
    countdownRunning=false;
    const s=document.getElementById("slide-3");
    s.classList.remove("switch");
    const t=document.getElementById("slide3Title");
    t.classList.remove("hidden");
    const c=s.querySelector(".countdown");
    if(c)c.remove();
  }

  // === timer factory ===
  function createTimer(slideId, timerId, totalSeconds) {
    const timerEl=document.getElementById(timerId);
    const slideEl=document.getElementById(slideId);
    let running=false, raf=null, startTimestamp=null, elapsed=0;
    let overlayActive=false, overlay=null, finished=false;

    const setNormal = ()=> timerEl.style.color="var(--text)";
    const setRed    = ()=> timerEl.style.color="var(--accent)";

    const fmt=sec=>{
      sec=Math.max(sec,0);
      const m=Math.floor(sec/60),s=Math.floor(sec%60);
      return String(m).padStart(2,"0")+":"+String(s).padStart(2,"0");
    };

    function renderDigits(t){
      timerEl.innerHTML="";
      for(const ch of t){
        const d=document.createElement("div");d.className="digit";
        const p=document.createElement("div");p.className="prev";
        const n=document.createElement("div");n.className="next";
        p.textContent=n.textContent=ch;d.append(p,n);timerEl.appendChild(d);
      }
    }

    function updateDisplay(o,n){
      const ds=timerEl.children;
      for(let i=0;i<ds.length;i++){
        const d=ds[i],p=d.querySelector(".prev"),x=d.querySelector(".next");
        if(o[i]!==n[i]){
          x.textContent=n[i];
          d.classList.add("anim");
          setTimeout(()=>{p.textContent=n[i];d.classList.remove("anim");},400);
        }
      }
    }

    function loop(now){
      if(!running)return;
      const ce=(now-startTimestamp)/1000;
      const rem=Math.max(totalSeconds-ce,0);
      const o=fmt(Math.ceil(totalSeconds-elapsed));
      const n=fmt(Math.ceil(rem));
      if(o!==n){updateDisplay(o,n);playSound(timerTick);}
      elapsed=ce;

      if(rem<=0 && !finished){
        finished=true;
        running=false;
        timerEl.classList.add("paused");
        setRed();
        return;
      }
      raf=requestAnimationFrame(loop);
    }

    function start(){
      if(running||overlayActive||countdownRunning)return;
      finished=false;
      setNormal();
      timerEl.classList.remove("paused");
      running=true;
      startTimestamp=performance.now()-elapsed*1000;
      raf=requestAnimationFrame(loop);
    }

    function pause(){
      if(!running)return;
      running=false;
      if(raf)cancelAnimationFrame(raf);
      timerEl.classList.add("paused");
      setRed();
    }

    function reset(){
      if(raf)cancelAnimationFrame(raf);
      running=false;
      finished=false;
      timerEl.classList.add("paused");
      timerEl.classList.add("resetting");
      setTimeout(()=>{
        elapsed=0;
        renderDigits(fmt(totalSeconds));
        timerEl.classList.remove("resetting");
        setRed();
      },600);
    }

    function showOverlay(){
      if(overlayActive||countdownRunning)return;
      overlayActive=true;countdownRunning=true;
      overlay=document.createElement("div");
      overlay.className="timer-overlay";slideEl.appendChild(overlay);
      const c=document.createElement("div");c.className="countdown";
      const circle=document.createElement("div");circle.className="circle";
      c.appendChild(circle);overlay.appendChild(c);
      let count=3;circle.textContent=count;playSound(countBeep);

      const i=setInterval(()=>{
        count--;
        if(count>0){circle.textContent=count;playSound(countBeep);}
        else if(count===0){
          circle.textContent=count;circle.classList.add("inverted");
          playSound(countEnd);
          overlay.style.transition="background-color .8s ease, opacity 1s ease, filter 1s ease";
          overlay.style.background="rgba(237,55,55,0.7)";
          overlay.style.backdropFilter="blur(20px)";
          setTimeout(()=>{
            overlay.style.filter="blur(30px)";
            overlay.style.opacity="0";
            overlay.style.background="rgba(12,26,34,0.3)";
            setTimeout(()=>{removeOverlay();},1000);
          },ZERO_HOLD_TIME);
          clearInterval(i);
        }
      },COUNTDOWN_SPEED);
    }

    function removeOverlay(){
      overlay?.remove();overlay=null;overlayActive=false;countdownRunning=false;
    }

    renderDigits(fmt(totalSeconds));
    setRed();
    return {start,pause,reset,showOverlay,removeOverlay,
      get running(){return running;},get overlayActive(){return overlayActive;}};  
  }

  const timer4 = createTimer("slide-4","timer",TIMER1_MINUTES * 60);
  const slide5=document.getElementById("slide-5");
  slide5.innerHTML="";
  const timer5El=document.createElement("div");
  timer5El.className="timer";timer5El.id="timer2";
  slide5.appendChild(timer5El);
  const timer5=createTimer("slide-5","timer2",TIMER2_MINUTES * 60);

  function currentTimer(){
    if(activeIndex===4)return timer4;
    if(activeIndex===5)return timer5;
    return null;
  }

  window.addEventListener("keydown",e=>{
    const k=e.key;
    if(k.toLowerCase()==="r"){const t=currentTimer();if(t)t.reset();return;}
    if(countdownRunning)return;
    if(/^[0-6]$/.test(k)){showSlide(parseInt(k));return;} // now includes 0 for new slide

    if(k===" "){
      const t=currentTimer();if(!t)return;
      if(t.running)t.pause();else t.start();
      return;
    }

    if(k==="Enter"){
      const t=currentTimer();if(!t)return;
      if(t.overlayActive)t.removeOverlay();else t.showOverlay();
      return;
    }
  });

  let startX=0,startY=0;
  window.addEventListener("touchstart",e=>{
    const t=e.touches[0];startX=t.clientX;startY=t.clientY;
  },{passive:true});
  window.addEventListener("touchend",e=>{
    if(countdownRunning)return;
    const t=e.changedTouches[0];
    const dx=t.clientX-startX,dy=t.clientY-startY;
    const absX=Math.abs(dx),absY=Math.abs(dy);
    if(absX>50&&absX>absY){
      if(dx>0)showSlide(activeIndex-1);else showSlide(activeIndex+1);
    }else if(absY>50&&absY>absX){
      const timer=currentTimer();
      if(!timer){if(activeIndex===3)startCountdown(document.getElementById("slide-3"));return;}
      if(dy>0){if(timer.running)timer.pause();else timer.start();}
      else{if(!timer.overlayActive)timer.showOverlay();}
    }
  },{passive:true});
})();
</script>


</body>
</html>
